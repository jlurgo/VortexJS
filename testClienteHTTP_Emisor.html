<!doctype html>
<html>
    <head>
        <title>title</title>
    </head>
    <body>
        <input type="button" id="btn_start" value="Dale!"/>
        <div>
            Mensajes Enviados: 
        </div>
        <div id="contador_de_mensajes">
            
        </div>
    </body>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
    <script type="text/javascript" src="Vortex.js"></script>
    <script type="text/javascript" src="FiltrosYTransformaciones.js"></script>
    <script type="text/javascript" src="NodoClienteHTTP.js"></script> 
    <script type="text/javascript" src="NodoPortalBidi.js"></script> 
    <script type="text/javascript" src="GeneradorDeIdMensaje.js"></script> 
    <script type="text/javascript" src="PataConectora.js"></script> 
    <script type="text/javascript" src="ClonadorDeObjetos.js"></script> 
    <script>
        $(document).ready(function () {
            var clienteHTTP = new NodoClienteHTTP('http://router-vortex.herokuapp.com', 10, true);
            var portal = new NodoPortalBidi();
            portal.conectarBidireccionalmenteCon(clienteHTTP);

            var div_contador = $('#contador_de_mensajes');
            var mensajes_enviados = 0;

            $('#btn_start').click(function () {
                for (var i = 0; i < 50; i++) {
                    portal.enviarMensaje({
                        tipoDeMensaje: 'pruebaHTTP'
                    });
                    mensajes_enviados += 1;
                    div_contador.text(mensajes_enviados.toString());
                }
            });
        });
    </script>
</html>